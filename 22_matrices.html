<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.38">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>UCSD Political Science Math Camp - 7&nbsp; Manipulating Vectors and Matrices</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./31_limits.html" rel="next">
<link href="./21_linear-algebra.html" rel="prev">
<link href="./favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><style>html{ scroll-behavior: smooth; }</style>
<script type="application/json" class="js-hypothesis-config">
{
  "theme": "clean"
}
</script><script async="" src="https://hypothes.is/embed.js"></script><link rel="stylesheet" href="style.css">
</head>
<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Manipulating Vectors and Matrices</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">UCSD Political Science Math Camp</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/UCSDPoliMathCamp/MathCamp/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="./UCSD-Political-Science-Math-Camp.pdf" title="Download PDF" class="sidebar-tool px-1"><i class="bi bi-file-pdf"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">About this Booklet</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00_warmup.html" class="sidebar-item-text sidebar-link">Warmup Questions</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_prerequisites.html" class="sidebar-item-text sidebar-link">Prerequisites</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">I Introduction to R</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11_orientation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Orientation and Reading in Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12_visualization.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Visualization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13_data_wrangling_cleaning.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Wrangling and Cleaning</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14_simulation.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Simulation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15_non-wysiwyg.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">LaTeX and Markdown</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">II Linear Algebra</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21_linear-algebra.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Linear Algebra</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22_matrices.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Manipulating Vectors and Matrices</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">III Calculus</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./31_limits.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Limits</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./32_derivatives.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Differential Calculus</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./33_optimization.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Optimization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./34_intergrals.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Integral Calculus</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">IV Probability</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./41_probability.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Probability Theory</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./42_distribution.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Summarizing Distributions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./43_statistics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Learning from Data</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./51_solutions-warmup.html" class="sidebar-item-text sidebar-link">Warmup Questions Solutions</a>
  </div>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#motivation" id="toc-motivation" class="nav-link active" data-scroll-target="#motivation">Motivation</a></li>
  <li><a href="#where-are-we-where-are-we-headed" id="toc-where-are-we-where-are-we-headed" class="nav-link" data-scroll-target="#where-are-we-where-are-we-headed">Where are we? Where are we headed?</a></li>
  <li><a href="#read-data" id="toc-read-data" class="nav-link" data-scroll-target="#read-data"> <span class="header-section-number">7.1</span> Read Data</a></li>
  <li><a href="#data.frame-vs.-matricies" id="toc-data.frame-vs.-matricies" class="nav-link" data-scroll-target="#data.frame-vs.-matricies"> <span class="header-section-number">7.2</span> data.frame vs.&nbsp;matricies</a></li>
  <li><a href="#handling-matricies-in-r" id="toc-handling-matricies-in-r" class="nav-link" data-scroll-target="#handling-matricies-in-r"> <span class="header-section-number">7.3</span> Handling matricies in <code>R</code></a></li>
  <li><a href="#variable-transformations" id="toc-variable-transformations" class="nav-link" data-scroll-target="#variable-transformations"> <span class="header-section-number">7.4</span> Variable Transformations</a></li>
  <li><a href="#linear-combinations" id="toc-linear-combinations" class="nav-link" data-scroll-target="#linear-combinations"> <span class="header-section-number">7.5</span> Linear Combinations</a></li>
  <li><a href="#matrix-basics" id="toc-matrix-basics" class="nav-link" data-scroll-target="#matrix-basics"> <span class="header-section-number">7.6</span> Matrix Basics</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/UCSDPoliMathCamp/MathCamp/edit/main/22_matrices.Rmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/UCSDPoliMathCamp/MathCamp/blob/main/22_matrices.Rmd" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span id="rmatrices" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Manipulating Vectors and Matrices</span></span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header><section id="motivation" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="motivation">Motivation</h3>
<p><a href="https://dash.harvard.edu/bitstream/handle/1/11986331/nunn-slave-trade.pdf">Nunn and Wantchekon (2011)</a> – “The Slave Trade and the Origins of Mistrust in Africa”<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> – argues that across African countries, the distrust of co-ethnics fueled by the slave trade has had long-lasting effects on modern day trust in these territories. They argued that the slave trade created distrust in these societies in part because as some African groups were employed by European traders to capture their neighbors and bring them to the slave ships.</p>
<p>Nunn and Wantchekon use a variety of statistical tools to make their case (adding controls, ordered logit, instrumental variables, falsification tests, causal mechanisms), many of which will be covered in future courses. In this module we will only touch on their first set of analysis that use Ordinary Least Squares (OLS). OLS is likely the most common application of linear algebra in the social sciences. We will cover some linear algebra, matrix manipulation, and vector manipulation from this data.</p>
</section><section id="where-are-we-where-are-we-headed" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="where-are-we-where-are-we-headed">Where are we? Where are we headed?</h3>
<p>Up till now, you should have covered:</p>
<ul>
<li>R basic programming</li>
<li>Data Import</li>
<li>Data Visualization</li>
<li>R Markdown</li>
</ul>
<p>Today we’ll cover</p>
<ul>
<li>Matrices &amp; Dataframes in R</li>
<li>Manipulating variables</li>
<li>And other <code>R</code> tips</li>
</ul></section><section id="read-data" class="level2" data-number="7.1"><h2 data-number="7.1" class="anchored" data-anchor-id="read-data">
<span class="header-section-number">7.1</span> Read Data</h2>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-2_466393f14e81c7509d80a84e6323bf4a">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://haven.tidyverse.org">haven</a></span><span class="op">)</span></span>
<span><span class="va">nunn_full</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://haven.tidyverse.org/reference/read_dta.html">read_dta</a></span><span class="op">(</span><span class="st">"data/input/Nunn_Wantchekon_AER_2011.dta"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nunn and Wantchekon’s main dataset has more than 20,000 observations. Each observation is a respondent from the Afrobarometer survey.</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-3_964892664b56541a9863461e51d711ea">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">nunn_full</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 59
  respno  ethni…¹ murdo…² isocode region distr…³ townv…⁴ locat…⁵ trust…⁶ trust…⁷
  &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1 BEN0001 fon     FON     BEN     atlna… KPOMAS… TOKPA-…      30       3       3
2 BEN0002 fon     FON     BEN     atlna… KPOMAS… TOKPA-…      30       3       3
3 BEN0003 fon     FON     BEN     atlna… OUIDAH  3ARROND      31       0       0
4 BEN0004 fon     FON     BEN     atlna… OUIDAH  3ARROND      31       0       0
5 BEN0005 fon     FON     BEN     atlna… OUIDAH  PAHOU        32       1       1
6 BEN0006 fon     FON     BEN     atlna… OUIDAH  PAHOU        32       1       1
# … with 49 more variables: intra_group_trust &lt;dbl&gt;, inter_group_trust &lt;dbl&gt;,
#   trust_local_council &lt;dbl&gt;, ln_export_area &lt;dbl&gt;, export_area &lt;dbl&gt;,
#   export_pop &lt;dbl&gt;, ln_export_pop &lt;dbl&gt;, age &lt;dbl&gt;, age2 &lt;dbl&gt;, male &lt;dbl&gt;,
#   urban_dum &lt;dbl&gt;, occupation &lt;dbl&gt;, religion &lt;dbl&gt;, living_conditions &lt;dbl&gt;,
#   education &lt;dbl&gt;, near_dist &lt;dbl&gt;, distsea &lt;dbl&gt;, loc_murdock_name &lt;chr&gt;,
#   loc_ln_export_area &lt;dbl&gt;, local_council_performance &lt;dbl&gt;,
#   council_listen &lt;dbl&gt;, corrupt_local_council &lt;dbl&gt;, school_present &lt;dbl&gt;, …
# ℹ Use `colnames()` to see all variable names</code></pre>
</div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">nunn_full</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "respno"                          "ethnicity"                      
 [3] "murdock_name"                    "isocode"                        
 [5] "region"                          "district"                       
 [7] "townvill"                        "location_id"                    
 [9] "trust_relatives"                 "trust_neighbors"                
[11] "intra_group_trust"               "inter_group_trust"              
[13] "trust_local_council"             "ln_export_area"                 
[15] "export_area"                     "export_pop"                     
[17] "ln_export_pop"                   "age"                            
[19] "age2"                            "male"                           
[21] "urban_dum"                       "occupation"                     
[23] "religion"                        "living_conditions"              
[25] "education"                       "near_dist"                      
[27] "distsea"                         "loc_murdock_name"               
[29] "loc_ln_export_area"              "local_council_performance"      
[31] "council_listen"                  "corrupt_local_council"          
[33] "school_present"                  "electricity_present"            
[35] "piped_water_present"             "sewage_present"                 
[37] "health_clinic_present"           "district_ethnic_frac"           
[39] "frac_ethnicity_in_district"      "townvill_nonethnic_mean_exports"
[41] "district_nonethnic_mean_exports" "region_nonethnic_mean_exports"  
[43] "country_nonethnic_mean_exports"  "murdock_centr_dist_coast"       
[45] "centroid_lat"                    "centroid_long"                  
[47] "explorer_contact"                "railway_contact"                
[49] "dist_Saharan_node"               "dist_Saharan_line"              
[51] "malaria_ecology"                 "v30"                            
[53] "v33"                             "fishing"                        
[55] "exports"                         "ln_exports"                     
[57] "total_missions_area"             "ln_init_pop_density"            
[59] "cities_1400_dum"                </code></pre>
</div>
</div>
<p>First, let’s consider a small subset of this dataset.</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-5_a1c0789cc707d64632f6d1d97f3193e1">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">nunn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://haven.tidyverse.org/reference/read_dta.html">read_dta</a></span><span class="op">(</span><span class="st">"data/input/Nunn_Wantchekon_sample.dta"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-6_c39276d5697f7a28d25bdda63c9312d4">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">nunn</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 5
   trust_neighbors exports ln_exports export_area ln_export_area
             &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;          &lt;dbl&gt;
 1               3   0.388      0.328     0.00407        0.00406
 2               3   0.631      0.489     0.0971         0.0926 
 3               3   0.994      0.690     0.0125         0.0124 
 4               0 183.         5.21      1.82           1.04   
 5               3   0          0         0              0      
 6               2   0          0         0              0      
 7               2 666.         6.50     14.0            2.71   
 8               0   0.348      0.298     0.00608        0.00606
 9               3   0.435      0.361     0.0383         0.0376 
10               3   0          0         0              0      </code></pre>
</div>
</div>
</section><section id="data.frame-vs.-matricies" class="level2" data-number="7.2"><h2 data-number="7.2" class="anchored" data-anchor-id="data.frame-vs.-matricies">
<span class="header-section-number">7.2</span> data.frame vs.&nbsp;matricies</h2>
<p>This is a <code>data.frame</code> object.</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-7_b2af9b96300269ac8a4a1544add3d6bb">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">nunn</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
</div>
<p>But it can be also consider a matrix in the linear algebra sense. What are the dimensions of this matrix?</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-8_9ef3c55665a34c4e6beacdf45d60a5bf">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">nunn</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10</code></pre>
</div>
</div>
<p><code>data.frame</code>s and matrices have much overlap in <code>R</code>, but to explicitly treat an object as a matrix, you’d need to coerce its class. Let’s call this matrix <code>X</code>.</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-9_1f3820336c317fd170b324ad8088c172">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">X</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">nunn</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>What is the difference between a <code>data.frame</code> and a matrix? A <code>data.frame</code> can have columns that are of different types, whereas — in a matrix — all columns must be of the same type (usually either “numeric” or “character”).</p>
<p>You can think of data frames maybe as matrices-plus, because a column can take on characters as well as numbers. As we just saw, this is often useful for real data analyses.</p>
<p>Another way to think about data frames is that it is a type of list. Try the <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> code below and notice how it is organized in slots. Each slot is a vector. They can be vectors of numbers or characters.</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-10_71ef76147c2ee0ed12c4b65cd8ffc178">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># enter this on your console</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">cen10</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="handling-matricies-in-r" class="level2" data-number="7.3"><h2 data-number="7.3" class="anchored" data-anchor-id="handling-matricies-in-r">
<span class="header-section-number">7.3</span> Handling matricies in <code>R</code>
</h2>
<p>You can easily transpose a matrix</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-11_41cf4b0acc033f821ab9c4ed9c31dca8">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">X</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      trust_neighbors     exports ln_exports  export_area ln_export_area
 [1,]               3   0.3883497  0.3281158  0.004067405    0.004059155
 [2,]               3   0.6311236  0.4892691  0.097059444    0.092633367
 [3,]               3   0.9941893  0.6902376  0.012524694    0.012446908
 [4,]               0 182.5891266  5.2127004  1.824284434    1.038255095
 [5,]               3   0.0000000  0.0000000  0.000000000    0.000000000
 [6,]               2   0.0000000  0.0000000  0.000000000    0.000000000
 [7,]               2 665.9652100  6.5027380 13.975566864    2.706419945
 [8,]               0   0.3476418  0.2983562  0.006082553    0.006064130
 [9,]               3   0.4349871  0.3611559  0.038332380    0.037615947
[10,]               3   0.0000000  0.0000000  0.000000000    0.000000000</code></pre>
</div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">X</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                       [,1]       [,2]       [,3]       [,4] [,5] [,6]
trust_neighbors 3.000000000 3.00000000 3.00000000   0.000000    3    2
exports         0.388349682 0.63112360 0.99418926 182.589127    0    0
ln_exports      0.328115761 0.48926911 0.69023758   5.212700    0    0
export_area     0.004067405 0.09705944 0.01252469   1.824284    0    0
ln_export_area  0.004059155 0.09263337 0.01244691   1.038255    0    0
                      [,7]        [,8]       [,9] [,10]
trust_neighbors   2.000000 0.000000000 3.00000000     3
exports         665.965210 0.347641766 0.43498713     0
ln_exports        6.502738 0.298356235 0.36115587     0
export_area      13.975567 0.006082553 0.03833238     0
ln_export_area    2.706420 0.006064130 0.03761595     0</code></pre>
</div>
</div>
<p>What are the values of all rows in the first column?</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-12_5519d12d025ea613bb74938ff41cab66">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">X</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 3 3 3 0 3 2 2 0 3 3</code></pre>
</div>
</div>
<p>What are all the values of “exports”? (i.e.&nbsp;return the whole “exports” column)</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-13_4afa619782dc51bef7f57cd4aa7e472a">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">X</span><span class="op">[</span>, <span class="st">"exports"</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]   0.3883497   0.6311236   0.9941893 182.5891266   0.0000000   0.0000000
 [7] 665.9652100   0.3476418   0.4349871   0.0000000</code></pre>
</div>
</div>
<p>What is the first observation (i.e.&nbsp;first row)?</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-14_2c5cfb82757b498199051d0f3e1960af">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">X</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>trust_neighbors         exports      ln_exports     export_area  ln_export_area 
    3.000000000     0.388349682     0.328115761     0.004067405     0.004059155 </code></pre>
</div>
</div>
<p>What is the value of the first variable of the first observation?</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-15_a049c5c348fb3eb565be1d3928893582">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">X</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>trust_neighbors 
              3 </code></pre>
</div>
</div>
<p>Pause and consider the following problem on your own. What is the following code doing?</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-16_9a47d9757df725d5db098e893c78e03b">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">X</span><span class="op">[</span><span class="va">X</span><span class="op">[</span>, <span class="st">"trust_neighbors"</span><span class="op">]</span> <span class="op">==</span> <span class="fl">0</span>, <span class="st">"export_area"</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.824284434 0.006082553</code></pre>
</div>
</div>
<p>Why does it give the same output as the following?</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-17_3610329e585258181cf2150dacec8279">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">X</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">X</span><span class="op">[</span>, <span class="st">"trust_neighbors"</span><span class="op">]</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span>, <span class="st">"export_area"</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.824284434 0.006082553</code></pre>
</div>
</div>
<p>Some more manipulation</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-18_62f6c937a26d6b309633f0e233bd877a">
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">X</span> <span class="op">+</span> <span class="va">X</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      trust_neighbors      exports ln_exports  export_area ln_export_area
 [1,]               6    0.7766994  0.6562315  0.008134809     0.00811831
 [2,]               6    1.2622472  0.9785382  0.194118887     0.18526673
 [3,]               6    1.9883785  1.3804752  0.025049388     0.02489382
 [4,]               0  365.1782532 10.4254007  3.648568869     2.07651019
 [5,]               6    0.0000000  0.0000000  0.000000000     0.00000000
 [6,]               4    0.0000000  0.0000000  0.000000000     0.00000000
 [7,]               4 1331.9304199 13.0054760 27.951133728     5.41283989
 [8,]               0    0.6952835  0.5967125  0.012165107     0.01212826
 [9,]               6    0.8699743  0.7223117  0.076664761     0.07523189
[10,]               6    0.0000000  0.0000000  0.000000000     0.00000000</code></pre>
</div>
</div>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-19_1d6c3b15567c82e2db057c7e0cdcb245">
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">X</span> <span class="op">-</span> <span class="va">X</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      trust_neighbors exports ln_exports export_area ln_export_area
 [1,]               0       0          0           0              0
 [2,]               0       0          0           0              0
 [3,]               0       0          0           0              0
 [4,]               0       0          0           0              0
 [5,]               0       0          0           0              0
 [6,]               0       0          0           0              0
 [7,]               0       0          0           0              0
 [8,]               0       0          0           0              0
 [9,]               0       0          0           0              0
[10,]               0       0          0           0              0</code></pre>
</div>
</div>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-20_3715bf6dca9bc0111a5a94dc57287a6e">
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">X</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html">%*%</a></span> <span class="va">X</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                trust_neighbors    exports ln_exports export_area
trust_neighbors       62.000000   1339.276   18.61181    28.40709
exports             1339.276369 476850.298 5283.76294  9640.42990
ln_exports            18.611811   5283.763   70.50077   100.46202
export_area           28.407085   9640.430  100.46202   198.65558
ln_export_area         5.853106   1992.047   23.08189    39.72847
                ln_export_area
trust_neighbors       5.853106
exports            1992.046502
ln_exports           23.081893
export_area          39.728468
ln_export_area        8.412887</code></pre>
</div>
</div>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-21_6de9b4159a67acd3f082b02054f2b343">
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">X</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      trust_neighbors     exports ln_exports  export_area ln_export_area   
 [1,]               3   0.3883497  0.3281158  0.004067405    0.004059155  1
 [2,]               3   0.6311236  0.4892691  0.097059444    0.092633367  2
 [3,]               3   0.9941893  0.6902376  0.012524694    0.012446908  3
 [4,]               0 182.5891266  5.2127004  1.824284434    1.038255095  4
 [5,]               3   0.0000000  0.0000000  0.000000000    0.000000000  5
 [6,]               2   0.0000000  0.0000000  0.000000000    0.000000000  6
 [7,]               2 665.9652100  6.5027380 13.975566864    2.706419945  7
 [8,]               0   0.3476418  0.2983562  0.006082553    0.006064130  8
 [9,]               3   0.4349871  0.3611559  0.038332380    0.037615947  9
[10,]               3   0.0000000  0.0000000  0.000000000    0.000000000 10</code></pre>
</div>
</div>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-22_67d1adaa0ccbd2870e50bf847e43e3de">
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">X</span>, <span class="fl">1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      trust_neighbors     exports ln_exports  export_area ln_export_area  
 [1,]               3   0.3883497  0.3281158  0.004067405    0.004059155 1
 [2,]               3   0.6311236  0.4892691  0.097059444    0.092633367 1
 [3,]               3   0.9941893  0.6902376  0.012524694    0.012446908 1
 [4,]               0 182.5891266  5.2127004  1.824284434    1.038255095 1
 [5,]               3   0.0000000  0.0000000  0.000000000    0.000000000 1
 [6,]               2   0.0000000  0.0000000  0.000000000    0.000000000 1
 [7,]               2 665.9652100  6.5027380 13.975566864    2.706419945 1
 [8,]               0   0.3476418  0.2983562  0.006082553    0.006064130 1
 [9,]               3   0.4349871  0.3611559  0.038332380    0.037615947 1
[10,]               3   0.0000000  0.0000000  0.000000000    0.000000000 1</code></pre>
</div>
</div>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-23_b534e2bd97c93e6ff43dfbe7e551d882">
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">X</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "trust_neighbors" "exports"         "ln_exports"      "export_area"    
[5] "ln_export_area" </code></pre>
</div>
</div>
</section><section id="variable-transformations" class="level2" data-number="7.4"><h2 data-number="7.4" class="anchored" data-anchor-id="variable-transformations">
<span class="header-section-number">7.4</span> Variable Transformations</h2>
<p><code>exports</code> is the total number of slaves that were taken from the individual’s ethnic group between Africa’s four slave trades between 1400-1900.</p>
<p>What is <code>ln_exports</code>? The article describes this as the natural log of one plus the <code>exports</code>. This is a transformation of one column by a particular function</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-24_a8f830ee66cce28aa4019154400884f6">
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">X</span><span class="op">[</span>, <span class="st">"exports"</span><span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.3281158 0.4892691 0.6902376 5.2127003 0.0000000 0.0000000 6.5027379
 [8] 0.2983562 0.3611559 0.0000000</code></pre>
</div>
</div>
<p>Question for you: why add the 1?</p>
<p>Verify that this is the same as <code>X[, "ln_exports"]</code></p>
</section><section id="linear-combinations" class="level2" data-number="7.5"><h2 data-number="7.5" class="anchored" data-anchor-id="linear-combinations">
<span class="header-section-number">7.5</span> Linear Combinations</h2>
<p>In Table 1 we see “OLS Estimates”. These are estimates of OLS coefficients and standard errors. You do not need to know what these are for now, but it doesn’t hurt to getting used to seeing them.</p>
<p><img src="images/nunn_wantchekon_table1.png" class="img-fluid"></p>
<p>A very crude way to describe regression is through linear combinations. The simplest linear combination is a one-to-one transformation.</p>
<p>Take the first number in Table 1, which is -0.00068. Now, multiply this by <code>exports</code></p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-25_c8e602685be1f27877df86faa00b888b">
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="op">-</span><span class="fl">0.00068</span> <span class="op">*</span> <span class="va">X</span><span class="op">[</span>, <span class="st">"exports"</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] -0.0002640778 -0.0004291640 -0.0006760487 -0.1241606061  0.0000000000
 [6]  0.0000000000 -0.4528563428 -0.0002363964 -0.0002957912  0.0000000000</code></pre>
</div>
</div>
<p>Now, just one more step. Make a new matrix with just exports and the value 1</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-26_640f6d9076b2d72bd2374a247721d614">
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">X2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">X</span><span class="op">[</span>, <span class="st">"exports"</span><span class="op">]</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>name this new column “intercept”</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-27_9c938ae2916c7922f1b683a45daa46f6">
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">X2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-28_b1334bbf8dbbf7a4e9f46bbbdcf529ba">
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">X2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"intercept"</span>, <span class="st">"exports"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>What are the dimensions of the matrix <code>X2</code>?</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-29_d05dffc49b02c018c734b9d2e11e52b3">
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">X2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10  2</code></pre>
</div>
</div>
<p>Now consider a new matrix, called <code>B</code>.</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-30_402b4d4161ebe77b9a76a23228bdc76f">
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">B</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1.62</span>, <span class="op">-</span><span class="fl">0.00068</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>What are the dimensions of <code>B</code>?</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-31_2a260f07626f3c3e8f91b4e1bce04c97">
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">B</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 1</code></pre>
</div>
</div>
<p>What is the product of <code>X2</code> and <code>B</code>? From the dimensions, can you tell if it will be conformable?</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-32_5ad0d07c53c9671576b8b71b1b29d368">
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">X2</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html">%*%</a></span> <span class="va">B</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1]
 [1,] 1.619736
 [2,] 1.619571
 [3,] 1.619324
 [4,] 1.495839
 [5,] 1.620000
 [6,] 1.620000
 [7,] 1.167144
 [8,] 1.619764
 [9,] 1.619704
[10,] 1.620000</code></pre>
</div>
</div>
<p>What is this multiplication doing in terms of equations?</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-33_3f0a6972235a9e4643d0b433c2c50a7d">

</div>
</section><section id="matrix-basics" class="level2" data-number="7.6"><h2 data-number="7.6" class="anchored" data-anchor-id="matrix-basics">
<span class="header-section-number">7.6</span> Matrix Basics</h2>
<p>Let’s take a look at Matrices in the context of R</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-34_fd8e27e5840027c1382e44e33e52bca3">
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cen10</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/input/usc2010_001percent.csv"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">cen10</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  state         sex      age race       
  &lt;chr&gt;         &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;      
1 New York      Female     8 White      
2 Ohio          Male      24 White      
3 Nevada        Male      37 White      
4 Michigan      Female    12 White      
5 Maryland      Female    18 Black/Negro
6 New Hampshire Male      50 White      </code></pre>
</div>
</div>
<p>What is the dimension of this dataframe? What does the number of rows represent? What does the number of columns represent?</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-35_8ceea20237e7eeb66eb97d96bf97c8ec">
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">cen10</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30871     4</code></pre>
</div>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">cen10</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30871</code></pre>
</div>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">cen10</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<p>What variables does this dataset hold? What kind of information does it have?</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-36_99d344614b2e2869b945ac606153902e">
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">cen10</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "state" "sex"   "age"   "race" </code></pre>
</div>
</div>
<p>We can access column vectors, or vectors that contain values of variables by using the $ sign</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-37_5d35e01cc70c74ffe0e275e626182748">
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">cen10</span><span class="op">$</span><span class="va">state</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "New York"      "Ohio"          "Nevada"        "Michigan"     
[5] "Maryland"      "New Hampshire"</code></pre>
</div>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">cen10</span><span class="op">$</span><span class="va">race</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "White"       "White"       "White"       "White"       "Black/Negro"
[6] "White"      </code></pre>
</div>
</div>
<p>We can look at a unique set of variable values by calling the unique function</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-38_f272f2b00b29576d1465963b1448ca3f">
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">cen10</span><span class="op">$</span><span class="va">state</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "New York"             "Ohio"                 "Nevada"              
 [4] "Michigan"             "Maryland"             "New Hampshire"       
 [7] "Iowa"                 "Missouri"             "New Jersey"          
[10] "California"           "Texas"                "Pennsylvania"        
[13] "Washington"           "West Virginia"        "Idaho"               
[16] "North Carolina"       "Massachusetts"        "Connecticut"         
[19] "Arkansas"             "Indiana"              "Wisconsin"           
[22] "Maine"                "Tennessee"            "Minnesota"           
[25] "Florida"              "Oklahoma"             "Montana"             
[28] "Georgia"              "Arizona"              "Colorado"            
[31] "Virginia"             "Illinois"             "Oregon"              
[34] "Kentucky"             "South Carolina"       "Kansas"              
[37] "Louisiana"            "Alabama"              "District of Columbia"
[40] "Mississippi"          "Utah"                 "Delaware"            
[43] "Nebraska"             "Alaska"               "New Mexico"          
[46] "South Dakota"         "Hawaii"               "Vermont"             
[49] "Rhode Island"         "Wyoming"              "North Dakota"        </code></pre>
</div>
</div>
<p>How many different states are represented (this dataset includes DC as a state)?</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-39_dbafd558b2c9a8fe86d44578cc0ba298">
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">cen10</span><span class="op">$</span><span class="va">state</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 51</code></pre>
</div>
</div>
<p>Matrices are rectangular structures of numbers (they have to be numbers, and they can’t be characters).</p>
<p>A cross-tab can be considered a matrix:</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-40_3e896e174587300b439af36d4094280d">
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">cen10</span><span class="op">$</span><span class="va">race</span>, <span class="va">cen10</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                  
                                   Female  Male
  American Indian or Alaska Native    142   153
  Black/Negro                        2070  1943
  Chinese                             192   162
  Japanese                             51    26
  Other Asian or Pacific Islander     587   542
  Other race, nec                     877   962
  Three or more major races            37    51
  Two major races                     443   426
  White                             11252 10955</code></pre>
</div>
</div>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-41_632e6737356ce3ae627de834a2894b48">
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cross_tab</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">cen10</span><span class="op">$</span><span class="va">race</span>, <span class="va">cen10</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">cross_tab</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9 2</code></pre>
</div>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cross_tab</span><span class="op">[</span><span class="fl">6</span>, <span class="fl">2</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 962</code></pre>
</div>
</div>
<p>But a subset of your data – individual values– can be considered a matrix too.</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-42_d31605cd101bc58871ba50b54d0b9ad2">
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># First 20 rows of the entire data</span></span>
<span><span class="co"># Below two lines of code do the same thing</span></span>
<span><span class="va">cen10</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span>, <span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 4
   state         sex      age race           
   &lt;chr&gt;         &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;          
 1 New York      Female     8 White          
 2 Ohio          Male      24 White          
 3 Nevada        Male      37 White          
 4 Michigan      Female    12 White          
 5 Maryland      Female    18 Black/Negro    
 6 New Hampshire Male      50 White          
 7 Iowa          Female    51 White          
 8 Missouri      Female    41 White          
 9 New Jersey    Male      62 White          
10 California    Male      25 White          
11 Texas         Female    23 White          
12 Pennsylvania  Female    66 White          
13 California    Female    57 White          
14 Texas         Female    73 Other race, nec
15 California    Male      43 White          
16 Washington    Male      29 White          
17 Texas         Male       8 White          
18 Missouri      Male      78 White          
19 West Virginia Male      10 White          
20 Idaho         Female     9 White          </code></pre>
</div>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cen10</span> <span class="op">%&gt;%</span> <span class="fu">slice</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 4
   state         sex      age race           
   &lt;chr&gt;         &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;          
 1 New York      Female     8 White          
 2 Ohio          Male      24 White          
 3 Nevada        Male      37 White          
 4 Michigan      Female    12 White          
 5 Maryland      Female    18 Black/Negro    
 6 New Hampshire Male      50 White          
 7 Iowa          Female    51 White          
 8 Missouri      Female    41 White          
 9 New Jersey    Male      62 White          
10 California    Male      25 White          
11 Texas         Female    23 White          
12 Pennsylvania  Female    66 White          
13 California    Female    57 White          
14 Texas         Female    73 Other race, nec
15 California    Male      43 White          
16 Washington    Male      29 White          
17 Texas         Male       8 White          
18 Missouri      Male      78 White          
19 West Virginia Male      10 White          
20 Idaho         Female     9 White          </code></pre>
</div>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Of the first 20 rows of the entire data, look at values of just race and age</span></span>
<span><span class="co"># Below two lines of code do the same thing</span></span>
<span><span class="va">cen10</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"race"</span>, <span class="st">"age"</span><span class="op">)</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 2
   race              age
   &lt;chr&gt;           &lt;dbl&gt;
 1 White               8
 2 White              24
 3 White              37
 4 White              12
 5 Black/Negro        18
 6 White              50
 7 White              51
 8 White              41
 9 White              62
10 White              25
11 White              23
12 White              66
13 White              57
14 Other race, nec    73
15 White              43
16 White              29
17 White               8
18 White              78
19 White              10
20 White               9</code></pre>
</div>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cen10</span> <span class="op">%&gt;%</span> <span class="fu">slice</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">select</span><span class="op">(</span><span class="va">race</span>, <span class="va">age</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 2
   race              age
   &lt;chr&gt;           &lt;dbl&gt;
 1 White               8
 2 White              24
 3 White              37
 4 White              12
 5 Black/Negro        18
 6 White              50
 7 White              51
 8 White              41
 9 White              62
10 White              25
11 White              23
12 White              66
13 White              57
14 Other race, nec    73
15 White              43
16 White              29
17 White               8
18 White              78
19 White              10
20 White               9</code></pre>
</div>
</div>
<p>A vector is a special type of matrix with only one column or only one row</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-43_b46748c7e73b48f2bbd30b585c21b144">
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># One column</span></span>
<span><span class="va">cen10</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"age"</span><span class="op">)</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 1
     age
   &lt;dbl&gt;
 1     8
 2    24
 3    37
 4    12
 5    18
 6    50
 7    51
 8    41
 9    62
10    25</code></pre>
</div>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cen10</span> <span class="op">%&gt;%</span> <span class="fu">slice</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">select</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"age"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 1
     age
   &lt;dbl&gt;
 1     8
 2    24
 3    37
 4    12
 5    18
 6    50
 7    51
 8    41
 9    62
10    25</code></pre>
</div>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># One row</span></span>
<span><span class="va">cen10</span><span class="op">[</span><span class="fl">2</span>, <span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
  state sex     age race 
  &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;
1 Ohio  Male     24 White</code></pre>
</div>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cen10</span> <span class="op">%&gt;%</span> <span class="fu">slice</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
  state sex     age race 
  &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;
1 Ohio  Male     24 White</code></pre>
</div>
</div>
<p>What if we want a special subset of the data? For example, what if I only want the records of individuals in California? What if I just want the age and race of individuals in California?</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-44_c0068b5ee44e5e6165786ce6442a8a3d">
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># subset for CA rows</span></span>
<span><span class="va">ca_subset</span> <span class="op">&lt;-</span> <span class="va">cen10</span><span class="op">[</span><span class="va">cen10</span><span class="op">$</span><span class="va">state</span> <span class="op">==</span> <span class="st">"California"</span>, <span class="op">]</span></span>
<span></span>
<span><span class="va">ca_subset_tidy</span> <span class="op">&lt;-</span> <span class="va">cen10</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">state</span> <span class="op">==</span> <span class="st">"California"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">all_equal</span><span class="op">(</span><span class="va">ca_subset</span>, <span class="va">ca_subset_tidy</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># subset for CA rows and select age and race</span></span>
<span><span class="va">ca_subset_age_race</span> <span class="op">&lt;-</span> <span class="va">cen10</span><span class="op">[</span><span class="va">cen10</span><span class="op">$</span><span class="va">state</span> <span class="op">==</span> <span class="st">"California"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"race"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="va">ca_subset_age_race_tidy</span> <span class="op">&lt;-</span> <span class="va">cen10</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">state</span> <span class="op">==</span> <span class="st">"California"</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">select</span><span class="op">(</span><span class="va">age</span>, <span class="va">race</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">all_equal</span><span class="op">(</span><span class="va">ca_subset_age_race</span>, <span class="va">ca_subset_age_race_tidy</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Some common operators that can be used to filter or to use as a condition. Remember, you can use the unique function to look at the set of all values a variable holds in the dataset.</p>
<div class="cell" data-hash="22_matrices_cache/html/unnamed-chunk-45_73b19bdd0029ccff83552fef8a42eb7a">
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># all individuals older than 30 and younger than 70</span></span>
<span><span class="va">s1</span> <span class="op">&lt;-</span> <span class="va">cen10</span><span class="op">[</span><span class="va">cen10</span><span class="op">$</span><span class="va">age</span> <span class="op">&gt;</span> <span class="fl">30</span> <span class="op">&amp;</span> <span class="va">cen10</span><span class="op">$</span><span class="va">age</span> <span class="op">&lt;</span> <span class="fl">70</span>, <span class="op">]</span></span>
<span><span class="va">s2</span> <span class="op">&lt;-</span> <span class="va">cen10</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">age</span> <span class="op">&gt;</span> <span class="fl">30</span> <span class="op">&amp;</span> <span class="va">age</span> <span class="op">&lt;</span> <span class="fl">70</span><span class="op">)</span></span>
<span><span class="fu">all_equal</span><span class="op">(</span><span class="va">s1</span>, <span class="va">s2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># all individuals in either New York or California</span></span>
<span><span class="va">s3</span> <span class="op">&lt;-</span> <span class="va">cen10</span><span class="op">[</span><span class="va">cen10</span><span class="op">$</span><span class="va">state</span> <span class="op">==</span> <span class="st">"New York"</span> <span class="op">|</span> <span class="va">cen10</span><span class="op">$</span><span class="va">state</span> <span class="op">==</span> <span class="st">"California"</span>, <span class="op">]</span></span>
<span><span class="va">s4</span> <span class="op">&lt;-</span> <span class="va">cen10</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">state</span> <span class="op">==</span> <span class="st">"New York"</span> <span class="op">|</span> <span class="va">state</span> <span class="op">==</span> <span class="st">"California"</span><span class="op">)</span></span>
<span><span class="fu">all_equal</span><span class="op">(</span><span class="va">s3</span>, <span class="va">s4</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># all individuals in any of the following states: California, Ohio, Nevada, Michigan</span></span>
<span><span class="va">s5</span> <span class="op">&lt;-</span> <span class="va">cen10</span><span class="op">[</span><span class="va">cen10</span><span class="op">$</span><span class="va">state</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"California"</span>, <span class="st">"Ohio"</span>, <span class="st">"Nevada"</span>, <span class="st">"Michigan"</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="va">s6</span> <span class="op">&lt;-</span> <span class="va">cen10</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">state</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"California"</span>, <span class="st">"Ohio"</span>, <span class="st">"Nevada"</span>, <span class="st">"Michigan"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">all_equal</span><span class="op">(</span><span class="va">s5</span>, <span class="va">s6</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># all individuals NOT in any of the following states: California, Ohio, Nevada, Michigan</span></span>
<span><span class="va">s7</span> <span class="op">&lt;-</span> <span class="va">cen10</span><span class="op">[</span><span class="op">!</span><span class="op">(</span><span class="va">cen10</span><span class="op">$</span><span class="va">state</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"California"</span>, <span class="st">"Ohio"</span>, <span class="st">"Nevada"</span>, <span class="st">"Michigan"</span><span class="op">)</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="va">s8</span> <span class="op">&lt;-</span> <span class="va">cen10</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="va">state</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"California"</span>, <span class="st">"Ohio"</span>, <span class="st">"Nevada"</span>, <span class="st">"Michigan"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">all_equal</span><span class="op">(</span><span class="va">s7</span>, <span class="va">s8</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>


<!-- -->

</section><section class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1" role="doc-endnote"><p><a href="https://dash.harvard.edu/bitstream/handle/1/11986331/nunn-slave-trade.pdf">Nunn, Nathan, and Leonard Wantchekon. 2011. “The Slave Trade and the Origins of Mistrust in Africa.” American Economic Review 101(7): 3221–52.</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./21_linear-algebra.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Linear Algebra</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./31_limits.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Limits</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb110" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">#  Manipulating Vectors and  Matrices {#rmatrices}</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, include=FALSE, message = FALSE, warning = FALSE}</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a><span class="fu">### Motivation {-}</span></span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-12"><a href="#cb110-12" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Nunn and Wantchekon (2011)</span><span class="co">](https://dash.harvard.edu/bitstream/handle/1/11986331/nunn-slave-trade.pdf)</span> --  "The Slave Trade and the Origins of Mistrust in Africa"^[<span class="co">[</span><span class="ot">Nunn, Nathan, and Leonard Wantchekon. 2011. “The Slave Trade and the Origins of Mistrust in Africa.” American Economic Review 101(7): 3221–52.</span><span class="co">](https://dash.harvard.edu/bitstream/handle/1/11986331/nunn-slave-trade.pdf)</span>] --  argues that across African countries, the distrust of co-ethnics fueled by the slave trade has had long-lasting effects on modern day trust in these territories. They argued that the slave trade created distrust in these societies in part because as some African groups were employed by European traders to capture their neighbors and bring them to the slave ships.</span>
<span id="cb110-13"><a href="#cb110-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-14"><a href="#cb110-14" aria-hidden="true" tabindex="-1"></a>Nunn and Wantchekon use a variety of statistical tools to make their case (adding controls, ordered logit, instrumental variables, falsification tests, causal mechanisms), many of which will be covered in future courses. In this module we will only touch on their first set of analysis that use Ordinary Least Squares (OLS). OLS is likely the most common application of linear algebra in the social sciences. We will cover some linear algebra, matrix manipulation, and vector manipulation from this data. </span>
<span id="cb110-15"><a href="#cb110-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-16"><a href="#cb110-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-17"><a href="#cb110-17" aria-hidden="true" tabindex="-1"></a><span class="fu">### Where are we? Where are we headed? {-}</span></span>
<span id="cb110-18"><a href="#cb110-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-19"><a href="#cb110-19" aria-hidden="true" tabindex="-1"></a>Up till now, you should have covered:</span>
<span id="cb110-20"><a href="#cb110-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-21"><a href="#cb110-21" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>R basic programming</span>
<span id="cb110-22"><a href="#cb110-22" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Data Import</span>
<span id="cb110-23"><a href="#cb110-23" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Data Visualization</span>
<span id="cb110-24"><a href="#cb110-24" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>R Markdown</span>
<span id="cb110-25"><a href="#cb110-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-26"><a href="#cb110-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-27"><a href="#cb110-27" aria-hidden="true" tabindex="-1"></a>Today we'll cover</span>
<span id="cb110-28"><a href="#cb110-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-29"><a href="#cb110-29" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Matrices &amp; Dataframes in R</span>
<span id="cb110-30"><a href="#cb110-30" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>Manipulating variables </span>
<span id="cb110-31"><a href="#cb110-31" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>And other <span class="in">`R`</span> tips</span>
<span id="cb110-32"><a href="#cb110-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-33"><a href="#cb110-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-34"><a href="#cb110-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-35"><a href="#cb110-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-36"><a href="#cb110-36" aria-hidden="true" tabindex="-1"></a><span class="fu">## Read Data</span></span>
<span id="cb110-37"><a href="#cb110-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-38"><a href="#cb110-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-41"><a href="#cb110-41" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-42"><a href="#cb110-42" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb110-43"><a href="#cb110-43" aria-hidden="true" tabindex="-1"></a>nunn_full <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">"data/input/Nunn_Wantchekon_AER_2011.dta"</span>)</span>
<span id="cb110-44"><a href="#cb110-44" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-45"><a href="#cb110-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-46"><a href="#cb110-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-47"><a href="#cb110-47" aria-hidden="true" tabindex="-1"></a>Nunn and Wantchekon's main dataset has more than 20,000 observations. Each observation is a respondent from the Afrobarometer survey.</span>
<span id="cb110-50"><a href="#cb110-50" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-51"><a href="#cb110-51" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nunn_full)</span>
<span id="cb110-52"><a href="#cb110-52" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(nunn_full)</span>
<span id="cb110-53"><a href="#cb110-53" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-54"><a href="#cb110-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-55"><a href="#cb110-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-56"><a href="#cb110-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-57"><a href="#cb110-57" aria-hidden="true" tabindex="-1"></a>First, let's consider a small subset of this dataset. </span>
<span id="cb110-58"><a href="#cb110-58" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, include = FALSE, eval = FALSE}</span></span>
<span id="cb110-59"><a href="#cb110-59" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">02138</span>)</span>
<span id="cb110-60"><a href="#cb110-60" aria-hidden="true" tabindex="-1"></a>sample <span class="ot">&lt;-</span> <span class="fu">sample_n</span>(nunn_full, <span class="dv">10</span>)</span>
<span id="cb110-61"><a href="#cb110-61" aria-hidden="true" tabindex="-1"></a>sample <span class="ot">&lt;-</span> <span class="fu">select</span>(sample, trust_neighbors, exports, ln_exports, export_area, ln_export_area)</span>
<span id="cb110-62"><a href="#cb110-62" aria-hidden="true" tabindex="-1"></a><span class="fu">write_dta</span>(sample, <span class="st">"data/input/Nunn_Wantchekon_sample.dta"</span>)</span>
<span id="cb110-63"><a href="#cb110-63" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-64"><a href="#cb110-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-67"><a href="#cb110-67" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-68"><a href="#cb110-68" aria-hidden="true" tabindex="-1"></a>nunn <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">"data/input/Nunn_Wantchekon_sample.dta"</span>)</span>
<span id="cb110-69"><a href="#cb110-69" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-70"><a href="#cb110-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-73"><a href="#cb110-73" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-74"><a href="#cb110-74" aria-hidden="true" tabindex="-1"></a>nunn</span>
<span id="cb110-75"><a href="#cb110-75" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-76"><a href="#cb110-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-77"><a href="#cb110-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-78"><a href="#cb110-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-79"><a href="#cb110-79" aria-hidden="true" tabindex="-1"></a><span class="fu">## data.frame vs. matricies</span></span>
<span id="cb110-80"><a href="#cb110-80" aria-hidden="true" tabindex="-1"></a>This is a <span class="in">`data.frame`</span> object. </span>
<span id="cb110-83"><a href="#cb110-83" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-84"><a href="#cb110-84" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(nunn)</span>
<span id="cb110-85"><a href="#cb110-85" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-86"><a href="#cb110-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-87"><a href="#cb110-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-88"><a href="#cb110-88" aria-hidden="true" tabindex="-1"></a>But it can be also consider a matrix in the linear algebra sense. What are the dimensions of this matrix?</span>
<span id="cb110-91"><a href="#cb110-91" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-92"><a href="#cb110-92" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(nunn)</span>
<span id="cb110-93"><a href="#cb110-93" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-94"><a href="#cb110-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-95"><a href="#cb110-95" aria-hidden="true" tabindex="-1"></a><span class="in">`data.frame`</span>s and matrices have much overlap in <span class="in">`R`</span>, but to explicitly treat an object as a matrix, you'd need to coerce its class. Let's call this matrix <span class="in">`X`</span>.</span>
<span id="cb110-96"><a href="#cb110-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-99"><a href="#cb110-99" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-100"><a href="#cb110-100" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(nunn)</span>
<span id="cb110-101"><a href="#cb110-101" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-102"><a href="#cb110-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-103"><a href="#cb110-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-104"><a href="#cb110-104" aria-hidden="true" tabindex="-1"></a>What is the difference between a <span class="in">`data.frame`</span> and a matrix? A <span class="in">`data.frame`</span> can have columns that are of different types, whereas --- in a matrix --- all columns must be of the same type (usually either "numeric" or "character").</span>
<span id="cb110-105"><a href="#cb110-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-106"><a href="#cb110-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-107"><a href="#cb110-107" aria-hidden="true" tabindex="-1"></a>You can think of data frames maybe as matrices-plus, because a column can take on characters as well as numbers. As we just saw, this is often useful for real data analyses.</span>
<span id="cb110-108"><a href="#cb110-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-109"><a href="#cb110-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-110"><a href="#cb110-110" aria-hidden="true" tabindex="-1"></a>Another way to think about data frames is that it is a type of list. Try the <span class="in">`str()`</span> code below and notice how it is organized in slots. Each slot is a vector. They can be vectors of numbers or characters.</span>
<span id="cb110-111"><a href="#cb110-111" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval = FALSE}</span></span>
<span id="cb110-112"><a href="#cb110-112" aria-hidden="true" tabindex="-1"></a><span class="co"># enter this on your console</span></span>
<span id="cb110-113"><a href="#cb110-113" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(cen10)</span>
<span id="cb110-114"><a href="#cb110-114" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-115"><a href="#cb110-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-116"><a href="#cb110-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-117"><a href="#cb110-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-118"><a href="#cb110-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-119"><a href="#cb110-119" aria-hidden="true" tabindex="-1"></a><span class="fu">## Handling matricies in `R`</span></span>
<span id="cb110-120"><a href="#cb110-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-121"><a href="#cb110-121" aria-hidden="true" tabindex="-1"></a>You can easily transpose a matrix</span>
<span id="cb110-124"><a href="#cb110-124" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-125"><a href="#cb110-125" aria-hidden="true" tabindex="-1"></a>X</span>
<span id="cb110-126"><a href="#cb110-126" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(X)</span>
<span id="cb110-127"><a href="#cb110-127" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-128"><a href="#cb110-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-129"><a href="#cb110-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-130"><a href="#cb110-130" aria-hidden="true" tabindex="-1"></a>What are the values of all rows in the first column? </span>
<span id="cb110-133"><a href="#cb110-133" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-134"><a href="#cb110-134" aria-hidden="true" tabindex="-1"></a>X[, <span class="dv">1</span>]</span>
<span id="cb110-135"><a href="#cb110-135" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-136"><a href="#cb110-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-137"><a href="#cb110-137" aria-hidden="true" tabindex="-1"></a>What are all the values of "exports"? (i.e. return the whole "exports" column)</span>
<span id="cb110-140"><a href="#cb110-140" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-141"><a href="#cb110-141" aria-hidden="true" tabindex="-1"></a>X[, <span class="st">"exports"</span>]</span>
<span id="cb110-142"><a href="#cb110-142" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-143"><a href="#cb110-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-144"><a href="#cb110-144" aria-hidden="true" tabindex="-1"></a>What is the first observation (i.e. first row)?</span>
<span id="cb110-147"><a href="#cb110-147" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-148"><a href="#cb110-148" aria-hidden="true" tabindex="-1"></a>X[<span class="dv">1</span>, ]</span>
<span id="cb110-149"><a href="#cb110-149" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-150"><a href="#cb110-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-151"><a href="#cb110-151" aria-hidden="true" tabindex="-1"></a>What is the value of the first variable of the first observation?</span>
<span id="cb110-154"><a href="#cb110-154" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-155"><a href="#cb110-155" aria-hidden="true" tabindex="-1"></a>X[<span class="dv">1</span>, <span class="dv">1</span>]</span>
<span id="cb110-156"><a href="#cb110-156" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-157"><a href="#cb110-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-158"><a href="#cb110-158" aria-hidden="true" tabindex="-1"></a>Pause and consider the following problem on your own. What is the following code doing? </span>
<span id="cb110-161"><a href="#cb110-161" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-162"><a href="#cb110-162" aria-hidden="true" tabindex="-1"></a>X[X[, <span class="st">"trust_neighbors"</span>] <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"export_area"</span>]</span>
<span id="cb110-163"><a href="#cb110-163" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-164"><a href="#cb110-164" aria-hidden="true" tabindex="-1"></a>Why does it give the same output as the following? </span>
<span id="cb110-167"><a href="#cb110-167" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-168"><a href="#cb110-168" aria-hidden="true" tabindex="-1"></a>X[<span class="fu">which</span>(X[, <span class="st">"trust_neighbors"</span>] <span class="sc">==</span> <span class="dv">0</span>), <span class="st">"export_area"</span>]</span>
<span id="cb110-169"><a href="#cb110-169" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-170"><a href="#cb110-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-171"><a href="#cb110-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-172"><a href="#cb110-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-173"><a href="#cb110-173" aria-hidden="true" tabindex="-1"></a>Some more manipulation </span>
<span id="cb110-176"><a href="#cb110-176" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-177"><a href="#cb110-177" aria-hidden="true" tabindex="-1"></a>X <span class="sc">+</span> X</span>
<span id="cb110-178"><a href="#cb110-178" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-179"><a href="#cb110-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-182"><a href="#cb110-182" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-183"><a href="#cb110-183" aria-hidden="true" tabindex="-1"></a>X <span class="sc">-</span> X</span>
<span id="cb110-184"><a href="#cb110-184" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-185"><a href="#cb110-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-188"><a href="#cb110-188" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-189"><a href="#cb110-189" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(X) <span class="sc">%*%</span> X</span>
<span id="cb110-190"><a href="#cb110-190" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-191"><a href="#cb110-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-194"><a href="#cb110-194" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-195"><a href="#cb110-195" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(X, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb110-196"><a href="#cb110-196" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-197"><a href="#cb110-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-200"><a href="#cb110-200" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-201"><a href="#cb110-201" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(X, <span class="dv">1</span>)</span>
<span id="cb110-202"><a href="#cb110-202" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-203"><a href="#cb110-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-204"><a href="#cb110-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-207"><a href="#cb110-207" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-208"><a href="#cb110-208" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(X)</span>
<span id="cb110-209"><a href="#cb110-209" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-210"><a href="#cb110-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-211"><a href="#cb110-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-212"><a href="#cb110-212" aria-hidden="true" tabindex="-1"></a><span class="fu">## Variable Transformations</span></span>
<span id="cb110-213"><a href="#cb110-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-214"><a href="#cb110-214" aria-hidden="true" tabindex="-1"></a><span class="in">`exports`</span> is the total number of slaves that were taken from the individual's ethnic group between Africa's four slave trades between 1400-1900. </span>
<span id="cb110-215"><a href="#cb110-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-216"><a href="#cb110-216" aria-hidden="true" tabindex="-1"></a>What is <span class="in">`ln_exports`</span>? The article describes this as the natural log of one plus the <span class="in">`exports`</span>. This is a transformation of one column by a particular function</span>
<span id="cb110-217"><a href="#cb110-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-220"><a href="#cb110-220" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-221"><a href="#cb110-221" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="dv">1</span> <span class="sc">+</span> X[, <span class="st">"exports"</span>])</span>
<span id="cb110-222"><a href="#cb110-222" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-223"><a href="#cb110-223" aria-hidden="true" tabindex="-1"></a>Question for you: why add the 1? </span>
<span id="cb110-224"><a href="#cb110-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-225"><a href="#cb110-225" aria-hidden="true" tabindex="-1"></a>Verify that this is the same as <span class="in">`X[, "ln_exports"]`</span></span>
<span id="cb110-226"><a href="#cb110-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-227"><a href="#cb110-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-228"><a href="#cb110-228" aria-hidden="true" tabindex="-1"></a><span class="fu">## Linear Combinations</span></span>
<span id="cb110-229"><a href="#cb110-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-230"><a href="#cb110-230" aria-hidden="true" tabindex="-1"></a>In Table 1 we see "OLS Estimates". These are estimates of OLS coefficients and standard errors. You do not need to know what these are for now, but it doesn't hurt to getting used to seeing them. </span>
<span id="cb110-231"><a href="#cb110-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-232"><a href="#cb110-232" aria-hidden="true" tabindex="-1"></a><span class="al">![](images/nunn_wantchekon_table1.png)</span></span>
<span id="cb110-233"><a href="#cb110-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-234"><a href="#cb110-234" aria-hidden="true" tabindex="-1"></a>A very crude way to describe regression is through linear combinations. The simplest linear combination is a one-to-one transformation.</span>
<span id="cb110-235"><a href="#cb110-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-236"><a href="#cb110-236" aria-hidden="true" tabindex="-1"></a>Take the first number in Table 1, which is -0.00068. Now, multiply this by <span class="in">`exports`</span></span>
<span id="cb110-237"><a href="#cb110-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-240"><a href="#cb110-240" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-241"><a href="#cb110-241" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span><span class="fl">0.00068</span> <span class="sc">*</span> X[, <span class="st">"exports"</span>]</span>
<span id="cb110-242"><a href="#cb110-242" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-243"><a href="#cb110-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-244"><a href="#cb110-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-245"><a href="#cb110-245" aria-hidden="true" tabindex="-1"></a>Now, just one more step. Make a new matrix with just exports and the value 1</span>
<span id="cb110-248"><a href="#cb110-248" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-249"><a href="#cb110-249" aria-hidden="true" tabindex="-1"></a>X2 <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="dv">1</span>, X[, <span class="st">"exports"</span>])</span>
<span id="cb110-250"><a href="#cb110-250" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-251"><a href="#cb110-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-252"><a href="#cb110-252" aria-hidden="true" tabindex="-1"></a>name this new column "intercept"</span>
<span id="cb110-253"><a href="#cb110-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-256"><a href="#cb110-256" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-257"><a href="#cb110-257" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(X2)</span>
<span id="cb110-258"><a href="#cb110-258" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-259"><a href="#cb110-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-262"><a href="#cb110-262" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-263"><a href="#cb110-263" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(X2) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"intercept"</span>, <span class="st">"exports"</span>)</span>
<span id="cb110-264"><a href="#cb110-264" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-265"><a href="#cb110-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-266"><a href="#cb110-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-267"><a href="#cb110-267" aria-hidden="true" tabindex="-1"></a>What are the dimensions of the matrix <span class="in">`X2`</span>?</span>
<span id="cb110-270"><a href="#cb110-270" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-271"><a href="#cb110-271" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(X2)</span>
<span id="cb110-272"><a href="#cb110-272" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-273"><a href="#cb110-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-274"><a href="#cb110-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-275"><a href="#cb110-275" aria-hidden="true" tabindex="-1"></a>Now consider a new matrix, called <span class="in">`B`</span>.</span>
<span id="cb110-276"><a href="#cb110-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-279"><a href="#cb110-279" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-280"><a href="#cb110-280" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="fl">1.62</span>, <span class="sc">-</span><span class="fl">0.00068</span>))</span>
<span id="cb110-281"><a href="#cb110-281" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-282"><a href="#cb110-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-283"><a href="#cb110-283" aria-hidden="true" tabindex="-1"></a>What are the dimensions of <span class="in">`B`</span>?</span>
<span id="cb110-286"><a href="#cb110-286" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-287"><a href="#cb110-287" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(B)</span>
<span id="cb110-288"><a href="#cb110-288" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-289"><a href="#cb110-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-290"><a href="#cb110-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-291"><a href="#cb110-291" aria-hidden="true" tabindex="-1"></a>What is the product of <span class="in">`X2`</span> and <span class="in">`B`</span>? From the dimensions, can you tell if it will be conformable?</span>
<span id="cb110-294"><a href="#cb110-294" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-295"><a href="#cb110-295" aria-hidden="true" tabindex="-1"></a>X2 <span class="sc">%*%</span> B</span>
<span id="cb110-296"><a href="#cb110-296" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-297"><a href="#cb110-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-298"><a href="#cb110-298" aria-hidden="true" tabindex="-1"></a>What is this multiplication doing in terms of equations?</span>
<span id="cb110-299"><a href="#cb110-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-300"><a href="#cb110-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-301"><a href="#cb110-301" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo = FALSE, eval = FALSE}</span></span>
<span id="cb110-302"><a href="#cb110-302" aria-hidden="true" tabindex="-1"></a><span class="do">## FYI regression in Table 1 (without cluster SEs)</span></span>
<span id="cb110-303"><a href="#cb110-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-304"><a href="#cb110-304" aria-hidden="true" tabindex="-1"></a>form <span class="ot">&lt;-</span> <span class="st">"trust_neighbors ~ exports + age + age2 +  male + urban_dum + factor(education) + factor(occupation) + factor(religion) + factor(living_conditions) + district_ethnic_frac + frac_ethnicity_in_district + isocode"</span></span>
<span id="cb110-305"><a href="#cb110-305" aria-hidden="true" tabindex="-1"></a>lm_1_1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">as.formula</span>(form), nunn_full)</span>
<span id="cb110-306"><a href="#cb110-306" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(lm_1_1)</span>
<span id="cb110-307"><a href="#cb110-307" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-308"><a href="#cb110-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-309"><a href="#cb110-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-310"><a href="#cb110-310" aria-hidden="true" tabindex="-1"></a><span class="fu">## Matrix Basics</span></span>
<span id="cb110-311"><a href="#cb110-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-312"><a href="#cb110-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-313"><a href="#cb110-313" aria-hidden="true" tabindex="-1"></a>Let's take a look at Matrices in the context of R</span>
<span id="cb110-314"><a href="#cb110-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-315"><a href="#cb110-315" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, message = FALSE}</span></span>
<span id="cb110-316"><a href="#cb110-316" aria-hidden="true" tabindex="-1"></a>cen10 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/input/usc2010_001percent.csv"</span>)</span>
<span id="cb110-317"><a href="#cb110-317" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cen10)</span>
<span id="cb110-318"><a href="#cb110-318" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-319"><a href="#cb110-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-320"><a href="#cb110-320" aria-hidden="true" tabindex="-1"></a>What is the dimension of this dataframe? What does the number of rows represent? What does the number of columns represent?</span>
<span id="cb110-321"><a href="#cb110-321" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, message = FALSE}</span></span>
<span id="cb110-322"><a href="#cb110-322" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(cen10)</span>
<span id="cb110-323"><a href="#cb110-323" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(cen10)</span>
<span id="cb110-324"><a href="#cb110-324" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(cen10)</span>
<span id="cb110-325"><a href="#cb110-325" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-326"><a href="#cb110-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-327"><a href="#cb110-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-328"><a href="#cb110-328" aria-hidden="true" tabindex="-1"></a>What variables does this dataset hold? What kind of information does it have?</span>
<span id="cb110-329"><a href="#cb110-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-330"><a href="#cb110-330" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, message = FALSE}</span></span>
<span id="cb110-331"><a href="#cb110-331" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(cen10)</span>
<span id="cb110-332"><a href="#cb110-332" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-333"><a href="#cb110-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-334"><a href="#cb110-334" aria-hidden="true" tabindex="-1"></a>We can access column vectors, or vectors that contain values of variables by using the $ sign</span>
<span id="cb110-335"><a href="#cb110-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-336"><a href="#cb110-336" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, message = FALSE}</span></span>
<span id="cb110-337"><a href="#cb110-337" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cen10<span class="sc">$</span>state)</span>
<span id="cb110-338"><a href="#cb110-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-339"><a href="#cb110-339" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cen10<span class="sc">$</span>race)</span>
<span id="cb110-340"><a href="#cb110-340" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-341"><a href="#cb110-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-342"><a href="#cb110-342" aria-hidden="true" tabindex="-1"></a>We can look at a unique set of variable values by calling the unique function</span>
<span id="cb110-343"><a href="#cb110-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-344"><a href="#cb110-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-345"><a href="#cb110-345" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, message = FALSE}</span></span>
<span id="cb110-346"><a href="#cb110-346" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(cen10<span class="sc">$</span>state)</span>
<span id="cb110-347"><a href="#cb110-347" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-348"><a href="#cb110-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-349"><a href="#cb110-349" aria-hidden="true" tabindex="-1"></a>How many different states are represented (this dataset includes DC as a state)? </span>
<span id="cb110-350"><a href="#cb110-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-351"><a href="#cb110-351" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, message = FALSE}</span></span>
<span id="cb110-352"><a href="#cb110-352" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(cen10<span class="sc">$</span>state))</span>
<span id="cb110-353"><a href="#cb110-353" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-354"><a href="#cb110-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-355"><a href="#cb110-355" aria-hidden="true" tabindex="-1"></a>Matrices are rectangular structures of numbers (they have to be numbers, and they can't be characters).</span>
<span id="cb110-356"><a href="#cb110-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-357"><a href="#cb110-357" aria-hidden="true" tabindex="-1"></a>A cross-tab can be considered a matrix:</span>
<span id="cb110-360"><a href="#cb110-360" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-361"><a href="#cb110-361" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(cen10<span class="sc">$</span>race, cen10<span class="sc">$</span>sex)</span>
<span id="cb110-362"><a href="#cb110-362" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-363"><a href="#cb110-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-364"><a href="#cb110-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-367"><a href="#cb110-367" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-368"><a href="#cb110-368" aria-hidden="true" tabindex="-1"></a>cross_tab <span class="ot">&lt;-</span> <span class="fu">table</span>(cen10<span class="sc">$</span>race, cen10<span class="sc">$</span>sex)</span>
<span id="cb110-369"><a href="#cb110-369" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(cross_tab)</span>
<span id="cb110-370"><a href="#cb110-370" aria-hidden="true" tabindex="-1"></a>cross_tab[<span class="dv">6</span>, <span class="dv">2</span>]</span>
<span id="cb110-371"><a href="#cb110-371" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-372"><a href="#cb110-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-373"><a href="#cb110-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-374"><a href="#cb110-374" aria-hidden="true" tabindex="-1"></a>But a subset of your data -- individual values-- can be considered a matrix too. </span>
<span id="cb110-375"><a href="#cb110-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-376"><a href="#cb110-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-377"><a href="#cb110-377" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning = FALSE}</span></span>
<span id="cb110-378"><a href="#cb110-378" aria-hidden="true" tabindex="-1"></a><span class="co"># First 20 rows of the entire data</span></span>
<span id="cb110-379"><a href="#cb110-379" aria-hidden="true" tabindex="-1"></a><span class="co"># Below two lines of code do the same thing</span></span>
<span id="cb110-380"><a href="#cb110-380" aria-hidden="true" tabindex="-1"></a>cen10[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>, ]</span>
<span id="cb110-381"><a href="#cb110-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-382"><a href="#cb110-382" aria-hidden="true" tabindex="-1"></a>cen10 <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>)</span>
<span id="cb110-383"><a href="#cb110-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-384"><a href="#cb110-384" aria-hidden="true" tabindex="-1"></a><span class="co"># Of the first 20 rows of the entire data, look at values of just race and age</span></span>
<span id="cb110-385"><a href="#cb110-385" aria-hidden="true" tabindex="-1"></a><span class="co"># Below two lines of code do the same thing</span></span>
<span id="cb110-386"><a href="#cb110-386" aria-hidden="true" tabindex="-1"></a>cen10[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>, <span class="fu">c</span>(<span class="st">"race"</span>, <span class="st">"age"</span>)]</span>
<span id="cb110-387"><a href="#cb110-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-388"><a href="#cb110-388" aria-hidden="true" tabindex="-1"></a>cen10 <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(race, age)</span>
<span id="cb110-389"><a href="#cb110-389" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-390"><a href="#cb110-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-391"><a href="#cb110-391" aria-hidden="true" tabindex="-1"></a>A vector is a special type of matrix with only one column or only one row </span>
<span id="cb110-394"><a href="#cb110-394" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-395"><a href="#cb110-395" aria-hidden="true" tabindex="-1"></a><span class="co"># One column</span></span>
<span id="cb110-396"><a href="#cb110-396" aria-hidden="true" tabindex="-1"></a>cen10[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="fu">c</span>(<span class="st">"age"</span>)]</span>
<span id="cb110-397"><a href="#cb110-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-398"><a href="#cb110-398" aria-hidden="true" tabindex="-1"></a>cen10 <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">"age"</span>))</span>
<span id="cb110-399"><a href="#cb110-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-400"><a href="#cb110-400" aria-hidden="true" tabindex="-1"></a><span class="co"># One row</span></span>
<span id="cb110-401"><a href="#cb110-401" aria-hidden="true" tabindex="-1"></a>cen10[<span class="dv">2</span>, ]</span>
<span id="cb110-402"><a href="#cb110-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-403"><a href="#cb110-403" aria-hidden="true" tabindex="-1"></a>cen10 <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">2</span>)</span>
<span id="cb110-404"><a href="#cb110-404" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-405"><a href="#cb110-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-406"><a href="#cb110-406" aria-hidden="true" tabindex="-1"></a>What if we want a special subset of the data? For example, what if I only want the records of individuals in California? What if I just want the age and race of individuals in California?</span>
<span id="cb110-409"><a href="#cb110-409" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-410"><a href="#cb110-410" aria-hidden="true" tabindex="-1"></a><span class="co"># subset for CA rows</span></span>
<span id="cb110-411"><a href="#cb110-411" aria-hidden="true" tabindex="-1"></a>ca_subset <span class="ot">&lt;-</span> cen10[cen10<span class="sc">$</span>state <span class="sc">==</span> <span class="st">"California"</span>, ]</span>
<span id="cb110-412"><a href="#cb110-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-413"><a href="#cb110-413" aria-hidden="true" tabindex="-1"></a>ca_subset_tidy <span class="ot">&lt;-</span> cen10 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"California"</span>)</span>
<span id="cb110-414"><a href="#cb110-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-415"><a href="#cb110-415" aria-hidden="true" tabindex="-1"></a><span class="fu">all_equal</span>(ca_subset, ca_subset_tidy)</span>
<span id="cb110-416"><a href="#cb110-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-417"><a href="#cb110-417" aria-hidden="true" tabindex="-1"></a><span class="co"># subset for CA rows and select age and race</span></span>
<span id="cb110-418"><a href="#cb110-418" aria-hidden="true" tabindex="-1"></a>ca_subset_age_race <span class="ot">&lt;-</span> cen10[cen10<span class="sc">$</span>state <span class="sc">==</span> <span class="st">"California"</span>, <span class="fu">c</span>(<span class="st">"age"</span>, <span class="st">"race"</span>)]</span>
<span id="cb110-419"><a href="#cb110-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-420"><a href="#cb110-420" aria-hidden="true" tabindex="-1"></a>ca_subset_age_race_tidy <span class="ot">&lt;-</span> cen10 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"California"</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(age, race)</span>
<span id="cb110-421"><a href="#cb110-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-422"><a href="#cb110-422" aria-hidden="true" tabindex="-1"></a><span class="fu">all_equal</span>(ca_subset_age_race, ca_subset_age_race_tidy)</span>
<span id="cb110-423"><a href="#cb110-423" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb110-424"><a href="#cb110-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-425"><a href="#cb110-425" aria-hidden="true" tabindex="-1"></a>Some common operators that can be used to filter or to use as a condition. Remember, you can use the unique function to look at the set of all values a variable holds in the dataset. </span>
<span id="cb110-428"><a href="#cb110-428" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-429"><a href="#cb110-429" aria-hidden="true" tabindex="-1"></a><span class="co"># all individuals older than 30 and younger than 70</span></span>
<span id="cb110-430"><a href="#cb110-430" aria-hidden="true" tabindex="-1"></a>s1 <span class="ot">&lt;-</span> cen10[cen10<span class="sc">$</span>age <span class="sc">&gt;</span> <span class="dv">30</span> <span class="sc">&amp;</span> cen10<span class="sc">$</span>age <span class="sc">&lt;</span> <span class="dv">70</span>, ]</span>
<span id="cb110-431"><a href="#cb110-431" aria-hidden="true" tabindex="-1"></a>s2 <span class="ot">&lt;-</span> cen10 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(age <span class="sc">&gt;</span> <span class="dv">30</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">70</span>)</span>
<span id="cb110-432"><a href="#cb110-432" aria-hidden="true" tabindex="-1"></a><span class="fu">all_equal</span>(s1, s2)</span>
<span id="cb110-433"><a href="#cb110-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-434"><a href="#cb110-434" aria-hidden="true" tabindex="-1"></a><span class="co"># all individuals in either New York or California</span></span>
<span id="cb110-435"><a href="#cb110-435" aria-hidden="true" tabindex="-1"></a>s3 <span class="ot">&lt;-</span> cen10[cen10<span class="sc">$</span>state <span class="sc">==</span> <span class="st">"New York"</span> <span class="sc">|</span> cen10<span class="sc">$</span>state <span class="sc">==</span> <span class="st">"California"</span>, ]</span>
<span id="cb110-436"><a href="#cb110-436" aria-hidden="true" tabindex="-1"></a>s4 <span class="ot">&lt;-</span> cen10 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"New York"</span> <span class="sc">|</span> state <span class="sc">==</span> <span class="st">"California"</span>)</span>
<span id="cb110-437"><a href="#cb110-437" aria-hidden="true" tabindex="-1"></a><span class="fu">all_equal</span>(s3, s4)</span>
<span id="cb110-438"><a href="#cb110-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-439"><a href="#cb110-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-440"><a href="#cb110-440" aria-hidden="true" tabindex="-1"></a><span class="co"># all individuals in any of the following states: California, Ohio, Nevada, Michigan</span></span>
<span id="cb110-441"><a href="#cb110-441" aria-hidden="true" tabindex="-1"></a>s5 <span class="ot">&lt;-</span> cen10[cen10<span class="sc">$</span>state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"California"</span>, <span class="st">"Ohio"</span>, <span class="st">"Nevada"</span>, <span class="st">"Michigan"</span>), ]</span>
<span id="cb110-442"><a href="#cb110-442" aria-hidden="true" tabindex="-1"></a>s6 <span class="ot">&lt;-</span> cen10 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"California"</span>, <span class="st">"Ohio"</span>, <span class="st">"Nevada"</span>, <span class="st">"Michigan"</span>))</span>
<span id="cb110-443"><a href="#cb110-443" aria-hidden="true" tabindex="-1"></a><span class="fu">all_equal</span>(s5, s6)</span>
<span id="cb110-444"><a href="#cb110-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-445"><a href="#cb110-445" aria-hidden="true" tabindex="-1"></a><span class="co"># all individuals NOT in any of the following states: California, Ohio, Nevada, Michigan</span></span>
<span id="cb110-446"><a href="#cb110-446" aria-hidden="true" tabindex="-1"></a>s7 <span class="ot">&lt;-</span> cen10[<span class="sc">!</span>(cen10<span class="sc">$</span>state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"California"</span>, <span class="st">"Ohio"</span>, <span class="st">"Nevada"</span>, <span class="st">"Michigan"</span>)), ]</span>
<span id="cb110-447"><a href="#cb110-447" aria-hidden="true" tabindex="-1"></a>s8 <span class="ot">&lt;-</span> cen10 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span>state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"California"</span>, <span class="st">"Ohio"</span>, <span class="st">"Nevada"</span>, <span class="st">"Michigan"</span>))</span>
<span id="cb110-448"><a href="#cb110-448" aria-hidden="true" tabindex="-1"></a><span class="fu">all_equal</span>(s7, s8)</span>
<span id="cb110-449"><a href="#cb110-449" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>